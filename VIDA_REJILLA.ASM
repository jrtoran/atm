; VIENE DE LA RUTINA RELOJ
; GRABA EN EEPROM LAS HORAS DE FUCIONAMIENTO TENIENDO EN CUENTA LA CONCENTRACION DE SAL, SIN COMPENSAR POR TEMPERAURA
;	6 MAS DE 6
;	5 DE 5 A 6
;	4 DE 4 A 5
;	3 DE 3 A 4
;	2 DE 2 A 3
;	1 DE 1 A 2
;	0 DE 0 A 1

REJILLA:

	LDS				R24,$0255				; CARGA EL PRIMER DIGITO DE LA CONCENTRACION DE SAL SIN COMPENSAR
	SBIW			R24,48					; RESTA 48 PARA CONVERTIRLO DEL 0 AL 5 	
	MOV				R5,R24
REJILLA_B:

; RUTINA DE GRAVACION EN EEPROM DE LA DATOS 
	LDI				R17,REG_REJILLA			; POSICION DE MEMORIA A LEER EN EEPROM 050
	ADD				R17,R5					; INCREMENTA LA POSICION EN FUNCION DE LA CONCENTRACION DE SAL
	CALL			EEPROM_RW				; RUTINA LECTURA EEPROM DEVUELVE EL VALOR EN R18
	MOV				YL,R18					; RESULTADO EN R18 Y LO PASA A YL VALOR BAJO
	LDI				R24,8					; INCREMENTA EL VALOR PARA LEER LA POSICION ALTA
	ADD				R17,R24
	CALL			EEPROM_RW
	MOV				YH,R18					; Y LO PASA A YH VAL0R ALTO
	ADIW			YH:YL,1					; INCREMENTA EN 1 CON ACARREO
	MOV				R18,YL					; PASA A R18 EL VALOR A GRABAR EN EEPROM
	LDI				R17,REG_REJILLA			; POSICION DE MEMORIA A LEER EN EEPROM
	ADD				R17,R5
	CALL			EEPROM_ES				; ESCRIBE EL VALOR INCREMENTADO EN 1 HORA
	MOV				R18,YH
	ADD				R17,R24
	CALL			EEPROM_ES	
	RET




