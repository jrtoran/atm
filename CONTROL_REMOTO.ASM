;                PROTOCOLO I2C INTERNO DEL AT MEGA 16
		; ------------------LOS PINES SCL Y SDA SE HAN DE CONFIGURAR COMO SALIDA -------------------------
		; RUTINA PARA LA LECTURA DEL CONVERTIDOR ANALOGICO DIGITAL PCF8591
		; GUARDA LOS DATOS EN RAM Y PONE EL RESULTADO EN RAM
		; EN R19 CONFIGURACION DEL PCF8591 DE 0 AL 7 CONFIGURADO CON A0 A1 A2 OJO MULTIPLICAR POR DOS
		; EN R18 LINEA DE ENTRADA A LEER Y CONFIGURACION DEL PERIFERICO
		; EN R26 NUMERO DE LECTURAS MAX. 250
		; EN R24 EL RESULTADO O EL VALOR A GRABAR
		; ESTA RUTINA NO VERIFICA QUE EL CONVERTIDOR RESPONDA PUEDE NO ESTAR PRESENTE
REMOTO_1:

; MEDICCION DE TENSION FUENTE
	LDI				R19, 0		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 0		; LINEA DE ENTRADA 0 A 3
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 

; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$100, R1
	STS				$1DD, R2
	STS				$1DF, R3

; MEDICCION TENSION DE SALIDA
	LDI				R19, 0		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 1		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
	STS				$104, R1
	STS				$105, R2
	STS				$106, R3

; MEDICCION DE TEMPERATURA
;	LDI				R19, 0		; CONFIGURACCION DEL PERIFERICO 0 A 7
;	LDI				R18, 2		; LINEA DE ENTRADA 1 A 4
;	LDI				R26, 200	; NUMERO DE LECTURAS
;	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
;	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$108, R1
;	STS				$109, R2
;	STS				$10A, R3

; MEDICION DE AMPERIOS
	LDI				R19, 0		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 3		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	STS				PRO_REMOTO_1, R24
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$10C, R1
	STS				$1B6, R2
	STS				$1B7, R3

 REMOTO_2:
; MEDICCION DE TENSION FUENTE
	LDI				R19, 1		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 0		; LINEA DE ENTRADA 0 A 3
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$114, R1
	STS				$1E2, R2
	STS				$1E4, R3

; MEDICCION TENSION DE SALIDA
	LDI				R19, 1		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 1		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
	STS				$118, R1
	STS				$119, R2
	STS				$11A, R3

; MEDICCION DE TEMPERATURA
;	LDI				R19, 1		; CONFIGURACCION DEL PERIFERICO 0 A 7
;	LDI				R18, 2		; LINEA DE ENTRADA 1 A 4
;	LDI				R26, 100	; NUMERO DE LECTURAS
;	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
;	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$11C, R1
;	STS				$11D, R2
;	STS				$11E, R3

; MEDICION DE AMPERIOS
	LDI				R19, 1		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 3		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	STS				PRO_REMOTO_2, R24
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$120, R1
	STS				$1BB, R2
	STS				$1BC, R3

LDS	R24, PRO_REMOTO_1
MOV	R18, R24
LDS	R24, PRO_REMOTO_2
ADD	R18,R24
LDS	R24, PRO_REMOTO_3
ADD	R18,R24
LDS	R24, PRO_REMOTO_4
ADD	R18,R24
STS PROD_TOTAL, R18
MOV R24, R18
CALL RADC
	STS				$16E, R1
	STS				$16F, R2
	STS				$170, R3

RET
 REMOTO_3:
; MEDICCION DE TENSION FUENTE
	LDI				R19, 2		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 0		; LINEA DE ENTRADA 0 A 3
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$128, R1
	STS				$1E7, R2
	STS				$1E9, R3

; MEDICCION TENSION DE SALIDA
	LDI				R19, 2		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 1		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
	STS				$12C, R1
	STS				$12D, R2
	STS				$12E, R3

; MEDICCION DE TEMPERATURA
;	LDI				R19, 2		; CONFIGURACCION DEL PERIFERICO 0 A 7
;	LDI				R18, 2		; LINEA DE ENTRADA 1 A 4
;	LDI				R26, 200	; NUMERO DE LECTURAS
;	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
;	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$130, R1
;	STS				$131, R2
;	STS				$132, R3

; MEDICION DE AMPERIOS
	LDI				R19, 2		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 3		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	STS				PRO_REMOTO_3, R24
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$134, R1
	STS				$1C0, R2
	STS				$1C1, R3

 REMOTO_4:
; MEDICCION DE TENSION FUENTE
	LDI				R19, 3		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 0		; LINEA DE ENTRADA 0 A 3
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$13C, R1
	STS				$1EC, R2
	STS				$1EE, R3

; MEDICCION TENSION DE SALIDA
	LDI				R19, 3		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 1		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
	STS				$140, R1
	STS				$141, R2
	STS				$142, R3

; MEDICCION DE TEMPERATURA
;	LDI				R19, 3		; CONFIGURACCION DEL PERIFERICO 0 A 7
;	LDI				R18, 2		; LINEA DE ENTRADA 1 A 4
;	LDI				R26, 100	; NUMERO DE LECTURAS
;	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
;	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$144, R1
;	STS				$145, R2
;	STS				$146, R3

; MEDICION DE AMPERIOS
	LDI				R19, 3		; CONFIGURACCION DEL PERIFERICO 0 A 7
	LDI				R18, 3		; LINEA DE ENTRADA 1 A 4
	LDI				R26, 100	; NUMERO DE LECTURAS
	CALL			PCF_B		; RUTINA MEDICCION 
; COLOCACION DE LOS VALORES EN RAM
	STS				PRO_REMOTO_4, R24
	CALL			RADC				; RUTINA PARA CONVERTIR EN ANALOGICO
;	STS				$148, R1
	STS				$1C5, R2
	STS				$1C6, R3
RET
