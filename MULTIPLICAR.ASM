; RUTINA PARA CALCULAR EL PORCENTAJE DE UNA CANTIDAD
; Y
; CONVERTIR DOS REGISTROS HEXADECIMALES " EL RESULTADO" EN DECIMALES
; COJE DE LA MEMORIA RAM "RAM_PRO_PRO" EL PORCENTAJE DE PRODUCION DIRECION 1E2 DE LA RAM Y 024 DE LA EEPROM
; Y EN R18 SE DEBE CARGAR LA CANTIDAD O PRODUCION PROGRAMADA
; R2 CENTENAS Y DECENAS DE MILLAR
; R1 UNIDADES DE MILLAR Y CENTENAS
; R0 UNIDADES Y DECENAS

MULTIPLICAR_A:
	PUSH	R19
	MOV		R25, R18
	LDS		R24, RAM_PRO_PRO
	MUL		R25, R24
	MOV		R25, R1
	MOV		R24, R0
	LDI		R18, 100
	MOV		R4, R18
	LDI		R18, 0
	MOV		R5, R18
	MOV		R2, R18
	MOV		R1, R18
	MOV		R0, R18
	
MULTIPLICAR_A_1:
	CP		R25, R5				; EL MAYOR ES CERO SALTA SI YA ES CERO
	BRNE	MULTIPLICAR_A_2		; SALTA SI ES DISTINTO
	CP		R24, R4				; SI ES MAYOR R24 QUE R4 SALTA
	BRCC	MULTIPLICAR_A_2		; SI ES IGUAL VA AQUI	
	RJMP	MULTIPLICAR_FIN
MULTIPLICAR_A_2:	; CENTENAS Y NIDADES DE MULLAR R5
	SBIW	R25: R24, 50		; RESTA 50
	SBIW	R25: R24, 50		; RESTA 50
	INC		R1					; INCREMENTA CENTENAS Y UNIDADES DE MILLAR
	CP		R1, R4
	BRNE	MULTIPLICAR_A_1			
	INC		R2					; LO MAS ALTO					
	SUB		R1, R4
	RJMP	MULTIPLICAR_A_1
MULTIPLICAR_FIN:
	MOV		R24, R1
	MOV		R18, R1
	STS		RAM_PRO_PRO_M, R24
	CALL	RADC
	STS		$25D, R1
	STS		$25E, R2
	STS		$25F, R3
	LDS		R24, RAM_PRO_PRO
	CALL	RADC
	STS		$254, R1
	STS		$255, R2
	STS		$256, R3
	POP		R19
	RET
